---
title: 物理内存的管理
date: 2022-11-22 20:50:46
tags: TECH
---
> 只针对x86-32架构的机器。目前只懂这个。

# 实模式下的物理内存
实模式下的一开始的640KB物理内存分配给了BIOS，后面640K-1M的空间依次给了一些给显示器和硬件接口。
可见一开始的实模式下，CPU可以使用的物理内存空间为1M。
## BIOS
1. CPU在通电后，默认是去读取0xFFFF0(1023K+1008B = 1M - 4B)这个地方的内存内容，并将其当作代码来执行。而0xFFFF0这个地方的内容是ROM-BIOS中的地址。也就是说，CPU在实模式下，大于1
   M的地址，是不会从RAM中去找的，而是找到了ROM中。
2. 0 - 0x3FF(1K-1B) : BIOS将自己的中断向量表拷贝到[0, 1K)的这个地址范围内，也就是说，内存刚上电初始化时，其开始的地址会被BIOS改写成BIOS的中断向量表；
3. 0x400(1K) - 0x4FF(2K-1B): BIOS存储自己的数据的地方，[1K, 2k)
4. 0x7C00(31K) - 0x7DFF(31K+511B): [31K, 31K+512B)BIOS会将启动磁盘的第一个扇区（这个扇区共512B）的内容拷贝到内存的0x7C00(31K)处；

## 显示器
1. 0xA0000(640K) - 0xAFFFF(704k-1B): [640K, 704K): 彩色显示器的内存映射；
2. 0xB0000(704K) - 0xB7FFF(736K-1B): [704K, 736): 黑白显示器的内存映射；
3. 0xB8000(736K) - 0xBFFFF(768K-1B): [736K, 768K): 文本模式显示器；
4. 0xC0000(768K) - 0xC7FFF(800K-1B): [768K, 800K): 暂未查到是哪种显示器使用了；


## 其他硬件
1. 0xC8000(800K) - 0xEFFFF(960K-1B): [800K, 960K): 硬件控制器的ROM或者内存映射式I/O； 


